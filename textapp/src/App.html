{#await $loading}
	<LoadingScreen/>
{:then answer}
	{#if $playerInDungeon}
		{#if $newAddress}
			<WelcomeBackScreen/>
		{:else}
			{#if $playerEnergy > 0}
				<GameScreen/>
			{:else}
				<RefillScreen/>
			{/if}
		{/if}
	{:else}
		<EnterScreen/>
	{/if}
	
{:catch error}
	<ErrorScreen error={error}/>
{/await}

<script>
	//if no delegate locally
        // if (energy > 0 || player moved)
            // welcome back
            // generate new delegate
            // if (energy == 0) // exec join with new delegate and 5$
            // if (energy > 0) // exec addDelegate() with MIN_BALANCE value
        // else
            // generate new delegate 
            // first welcome
    // if delegate locally
        // show game state
        // if(energy == 0) // exec refill
		// if(energy > 0) // nothing to do
		
	import GameScreen from './screens/GameScreen.html';
	import LoadingScreen from './screens/LoadingScreen.html';
	import ErrorScreen from './screens/ErrorScreen.html';
	import EnterScreen from './screens/EnterScreen.html';
	import WelcomeBackScreen from './screens/WelcomeBackScreen.html';
	import RefillScreen from './screens/RefillScreen.html';
	export default {
		components: {
			GameScreen,
			LoadingScreen,
			ErrorScreen,
			EnterScreen,
			WelcomeBackScreen,
			RefillScreen,
		}
	};
</script>
